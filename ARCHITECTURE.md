# ğŸ“ é¡¹ç›®æ¶æ„è¯´æ˜

## æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Vercel å¹³å°                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Next.js App â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Edge Networkâ”‚             â”‚
â”‚  â”‚  (SSR/SSG)   â”‚         â”‚  (CDN)       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                                                â”‚
â”‚         â”‚                                                â”‚
â”‚         â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ API Routes   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Vercel       â”‚             â”‚
â”‚  â”‚ Serverless   â”‚         â”‚ Postgres     â”‚             â”‚
â”‚  â”‚ Functions    â”‚         â”‚ (Neon)       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯æ ˆå±‚æ¬¡

### 1. å‰ç«¯å±‚ (Presentation Layer)

- **Next.js 14 App Router**: 
  - ä½¿ç”¨æœ€æ–°çš„ App Router æ¶æ„
  - æ”¯æŒ Server Components å’Œ Client Components
  - è‡ªåŠ¨ä»£ç åˆ†å‰²å’Œä¼˜åŒ–

- **React 18**:
  - Server Componentsï¼ˆæœåŠ¡ç«¯ç»„ä»¶ï¼‰
  - Client Componentsï¼ˆå®¢æˆ·ç«¯äº¤äº’ç»„ä»¶ï¼‰
  - React Hooks

- **Tailwind CSS**:
  - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
  - å“åº”å¼è®¾è®¡
  - åŸå­åŒ– CSS

### 2. åº”ç”¨å±‚ (Application Layer)

#### API Routes (`/app/api/`)
- RESTful API ç«¯ç‚¹
- Serverless Functions
- å¤„ç† HTTP è¯·æ±‚/å“åº”

#### Server Actions (`/app/api/posts/actions.ts`)
- æœåŠ¡ç«¯æ“ä½œ
- ç›´æ¥è°ƒç”¨ï¼Œæ— éœ€ API è·¯ç”±
- ç±»å‹å®‰å…¨

### 3. ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)

- **æ•°æ®éªŒè¯** (`/lib/validations.ts`):
  - Zod Schema éªŒè¯
  - ç±»å‹å®‰å…¨çš„æ•°æ®éªŒè¯

- **æ•°æ®åº“è®¿é—®** (`/lib/db.ts`):
  - Prisma Client å•ä¾‹æ¨¡å¼
  - è¿æ¥æ± ç®¡ç†

### 4. æ•°æ®å±‚ (Data Layer)

- **Prisma ORM**:
  - ç±»å‹å®‰å…¨çš„æ•°æ®åº“è®¿é—®
  - è‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹
  - æŸ¥è¯¢æ„å»ºå™¨

- **Vercel Postgres**:
  - åŸºäº Neon çš„ PostgreSQL
  - Serverless æ•°æ®åº“
  - è‡ªåŠ¨æ‰©å±•

## æ•°æ®æµ

### è¯»å–æ•°æ®æµç¨‹

```
ç”¨æˆ·è¯·æ±‚
  â†“
Next.js Router
  â†“
Server Component (/app/page.tsx)
  â†“
Prisma Client (/lib/db.ts)
  â†“
Vercel Postgres
  â†“
è¿”å›æ•°æ®
  â†“
æ¸²æŸ“ HTML
  â†“
å‘é€ç»™å®¢æˆ·ç«¯
```

### åˆ›å»º/æ›´æ–°æ•°æ®æµç¨‹

```
ç”¨æˆ·æäº¤è¡¨å•
  â†“
Client Component (/components/PostForm.tsx)
  â†“
API Route (/app/api/posts/route.ts)
  â†“
Zod éªŒè¯ (/lib/validations.ts)
  â†“
Prisma Client (/lib/db.ts)
  â†“
Vercel Postgres
  â†“
è¿”å›ç»“æœ
  â†“
é¡µé¢åˆ·æ–°/é‡å®šå‘
```

## ç›®å½•ç»“æ„è¯¦è§£

```
weaver-admin/
â”‚
â”œâ”€â”€ app/                          # Next.js App Router ç›®å½•
â”‚   â”œâ”€â”€ api/                      # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ posts/               # æ–‡ç« ç›¸å…³ API
â”‚   â”‚       â”œâ”€â”€ route.ts         # GET, POST /api/posts
â”‚   â”‚       â”œâ”€â”€ actions.ts       # Server Actions
â”‚   â”‚       â””â”€â”€ [id]/           # åŠ¨æ€è·¯ç”±
â”‚   â”‚           â””â”€â”€ route.ts    # GET, PUT, DELETE /api/posts/:id
â”‚   â”‚
â”‚   â”œâ”€â”€ posts/                   # æ–‡ç« é¡µé¢
â”‚   â”‚   â”œâ”€â”€ new/                # åˆ›å»ºæ–‡ç« é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ [id]/              # åŠ¨æ€è·¯ç”±
â”‚   â”‚       â””â”€â”€ edit/          # ç¼–è¾‘æ–‡ç« é¡µé¢
â”‚   â”‚           â””â”€â”€ page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ layout.tsx              # æ ¹å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ page.tsx                # é¦–é¡µï¼ˆæ–‡ç« åˆ—è¡¨ï¼‰
â”‚   â”œâ”€â”€ globals.css             # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ not-found.tsx           # 404 é¡µé¢
â”‚
â”œâ”€â”€ components/                  # React ç»„ä»¶
â”‚   â”œâ”€â”€ PostForm.tsx            # æ–‡ç« è¡¨å•ç»„ä»¶ï¼ˆClient Componentï¼‰
â”‚   â””â”€â”€ DeleteButton.tsx        # åˆ é™¤æŒ‰é’®ç»„ä»¶ï¼ˆClient Componentï¼‰
â”‚
â”œâ”€â”€ lib/                         # å·¥å…·åº“
â”‚   â”œâ”€â”€ db.ts                   # Prisma Client å•ä¾‹
â”‚   â””â”€â”€ validations.ts          # Zod éªŒè¯ Schema
â”‚
â”œâ”€â”€ prisma/                      # Prisma é…ç½®
â”‚   â””â”€â”€ schema.prisma           # æ•°æ®åº“ Schema å®šä¹‰
â”‚
â”œâ”€â”€ types/                       # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ public/                      # é™æ€èµ„æºç›®å½•
â”‚
â”œâ”€â”€ .env.local                   # æœ¬åœ°ç¯å¢ƒå˜é‡ï¼ˆä¸æäº¤åˆ° Gitï¼‰
â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ vercel.json                  # Vercel éƒ¨ç½²é…ç½®
â”œâ”€â”€ next.config.js               # Next.js é…ç½®
â”œâ”€â”€ tailwind.config.ts           # Tailwind CSS é…ç½®
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â””â”€â”€ package.json                 # é¡¹ç›®ä¾èµ–
```

## å…³é”®è®¾è®¡å†³ç­–

### 1. ä¸ºä»€ä¹ˆä½¿ç”¨ Prismaï¼Ÿ

- âœ… **ç±»å‹å®‰å…¨**: è‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹
- âœ… **å¼€å‘ä½“éªŒ**: ä¼˜ç§€çš„ IDE æ”¯æŒå’Œè‡ªåŠ¨å®Œæˆ
- âœ… **è¿ç§»ç®¡ç†**: å¼ºå¤§çš„æ•°æ®åº“è¿ç§»ç³»ç»Ÿ
- âœ… **æŸ¥è¯¢æ„å»ºå™¨**: ç›´è§‚çš„ API

### 2. ä¸ºä»€ä¹ˆä½¿ç”¨ Server Componentsï¼Ÿ

- âœ… **æ€§èƒ½ä¼˜åŒ–**: å‡å°‘å®¢æˆ·ç«¯ JavaScript åŒ…å¤§å°
- âœ… **SEO å‹å¥½**: æœåŠ¡ç«¯æ¸²æŸ“
- âœ… **æ•°æ®è·å–**: ç›´æ¥åœ¨æœåŠ¡ç«¯è®¿é—®æ•°æ®åº“

### 3. ä¸ºä»€ä¹ˆæ··åˆä½¿ç”¨ API Routes å’Œ Server Actionsï¼Ÿ

- **API Routes**: 
  - é€‚åˆéœ€è¦ RESTful æ¥å£çš„åœºæ™¯
  - å¯ä»¥è¢«å¤–éƒ¨ç³»ç»Ÿè°ƒç”¨
  - æ”¯æŒæ ‡å‡† HTTP æ–¹æ³•

- **Server Actions**:
  - æ›´ç®€æ´çš„è¡¨å•å¤„ç†
  - ç±»å‹å®‰å…¨
  - è‡ªåŠ¨é‡æ–°éªŒè¯

### 4. ä¸ºä»€ä¹ˆä½¿ç”¨ Zod éªŒè¯ï¼Ÿ

- âœ… **ç±»å‹å®‰å…¨**: è‡ªåŠ¨æ¨æ–­ TypeScript ç±»å‹
- âœ… **è¿è¡Œæ—¶éªŒè¯**: ç¡®ä¿æ•°æ®ç¬¦åˆé¢„æœŸ
- âœ… **é”™è¯¯æ¶ˆæ¯**: å‹å¥½çš„éªŒè¯é”™è¯¯ä¿¡æ¯

## æ•°æ®åº“ Schema

```prisma
model Post {
  id        String   @id @default(cuid())  // å”¯ä¸€æ ‡è¯†ç¬¦
  title     String                          // æ–‡ç« æ ‡é¢˜
  content   String   @db.Text              // æ–‡ç« å†…å®¹ï¼ˆæ”¯æŒé•¿æ–‡æœ¬ï¼‰
  author    String                          // ä½œè€…åç§°
  createdAt DateTime @default(now())       // åˆ›å»ºæ—¶é—´
  updatedAt DateTime @updatedAt            // æ›´æ–°æ—¶é—´

  @@map("posts")                           // æ•°æ®åº“è¡¨å
}
```

## å®‰å…¨è€ƒè™‘

1. **è¾“å…¥éªŒè¯**: ä½¿ç”¨ Zod éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥
2. **SQL æ³¨å…¥é˜²æŠ¤**: Prisma ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
3. **ç¯å¢ƒå˜é‡**: æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­
4. **CORS**: Next.js è‡ªåŠ¨å¤„ç†åŒæºç­–ç•¥
5. **XSS é˜²æŠ¤**: React è‡ªåŠ¨è½¬ä¹‰è¾“å‡º

## æ€§èƒ½ä¼˜åŒ–

1. **Server Components**: å‡å°‘å®¢æˆ·ç«¯ JavaScript
2. **è‡ªåŠ¨ä»£ç åˆ†å‰²**: Next.js è‡ªåŠ¨ä¼˜åŒ–
3. **é™æ€ç”Ÿæˆ**: é€‚åˆçš„é¡µé¢ä½¿ç”¨é™æ€ç”Ÿæˆ
4. **æ•°æ®åº“è¿æ¥æ± **: Prisma è‡ªåŠ¨ç®¡ç†è¿æ¥æ± 
5. **Edge Network**: Vercel å…¨çƒ CDN

## æ‰©å±•å»ºè®®

### çŸ­æœŸæ‰©å±•

- [ ] æ·»åŠ ç”¨æˆ·è®¤è¯ï¼ˆNextAuth.jsï¼‰
- [ ] æ·»åŠ åˆ†é¡µåŠŸèƒ½
- [ ] æ·»åŠ æœç´¢åŠŸèƒ½
- [ ] æ·»åŠ æ–‡ä»¶ä¸Šä¼ ï¼ˆVercel Blobï¼‰

### ä¸­æœŸæ‰©å±•

- [ ] æ·»åŠ è¯„è®ºç³»ç»Ÿ
- [ ] æ·»åŠ æ ‡ç­¾/åˆ†ç±»
- [ ] æ·»åŠ å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- [ ] æ·»åŠ ç¼“å­˜å±‚ï¼ˆRedisï¼‰

### é•¿æœŸæ‰©å±•

- [ ] å¾®æœåŠ¡æ‹†åˆ†
- [ ] æ·»åŠ æ¶ˆæ¯é˜Ÿåˆ—
- [ ] æ·»åŠ å®æ—¶åŠŸèƒ½ï¼ˆWebSocketï¼‰
- [ ] å¤šç§Ÿæˆ·æ”¯æŒ

## éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ

```
æœ¬åœ°å¼€å‘æœåŠ¡å™¨ (localhost:3000)
  â†“
æœ¬åœ° PostgreSQL æˆ– Vercel Postgres
```

### ç”Ÿäº§ç¯å¢ƒ

```
ç”¨æˆ·æµè§ˆå™¨
  â†“
Vercel Edge Network (å…¨çƒ CDN)
  â†“
Vercel Serverless Functions (æŒ‰åŒºåŸŸ)
  â†“
Vercel Postgres (å¤šåŒºåŸŸå¤åˆ¶)
```

## ç›‘æ§å’Œæ—¥å¿—

- **Vercel Analytics**: æ€§èƒ½ç›‘æ§
- **Vercel Logs**: å‡½æ•°æ‰§è¡Œæ—¥å¿—
- **Vercel Speed Insights**: ç”¨æˆ·ä½“éªŒç›‘æ§
- **Database Metrics**: æ•°æ®åº“ä½¿ç”¨æƒ…å†µ

## æˆæœ¬ä¼°ç®—ï¼ˆå…è´¹é¢åº¦ï¼‰

### Vercel Hobby è®¡åˆ’

- âœ… æ— é™é¢„è§ˆéƒ¨ç½²
- âœ… 100 GB å¸¦å®½/æœˆ
- âœ… å…¨çƒ CDN
- âœ… Serverless Functions

### Vercel Postgres

- âœ… 256 MB å­˜å‚¨
- âœ… 60 å°æ—¶è®¡ç®—æ—¶é—´/æœˆ
- âœ… è‡ªåŠ¨å¤‡ä»½
- âœ… å¤šåŒºåŸŸæ”¯æŒï¼ˆéƒ¨åˆ†ï¼‰

**é€‚åˆåœºæ™¯**: ä¸­å°å‹é¡¹ç›®ã€ä¸ªäººé¡¹ç›®ã€MVP å¼€å‘

